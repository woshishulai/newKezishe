import{h as a}from"./rules-fBdJGkfA.js";import{v as s,w as e,x as r}from"./api-wuboqdNi.js";import{_ as o,u as l}from"./index-Dg1jL7gn.js";import{n,W as d,o as i,c as t,q as u,e as w,w as g,u as m,m as P,Q as c,p,a1 as f,y,R as b,T as v,N as h,J as L,K as _}from"./vendor-nLmjWMLT.js";import"./index-1zYz0Z2q.js";const F=a=>(b("data-v-c0ef7c9b"),a=a(),v(),a),U={class:"change-password"},x={class:"card-box"},j=F((()=>u("div",{class:"title"},"修改密码",-1))),q={class:"form-wrap"},I={class:"change-login-password"},k=F((()=>u("h5",null,"登录密码",-1))),$={class:"change-shipping-password"},N=F((()=>u("h5",null,"支付密码",-1))),O=o({__name:"ChangePassword",setup(o){const b=l();let v=n({});const F=n({oldLoginPassword:"",newLoginPassword:"1234567",confirmLoginPassword:"",payPassword:"",newPayPassword:"12345678",confirmPayPassword:""});d((async()=>{try{let a=await s();Object.assign(v,a.Data)}catch(a){}}));const O={oldLoginPassword:[{required:!0,message:"请输入原始密码",trigger:"blur"},{min:6,max:16,message:"密码长度应在6-16个字符之间",trigger:"blur"},{pattern:/^[^\u4e00-\u9fa5]+$/,message:"密码不能包含中文字符或空格",trigger:"blur"}],newLoginPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:16,message:"密码长度应在6-16个字符之间",trigger:"blur"},{pattern:/^[^\u4e00-\u9fa5]+$/,message:"密码不能包含中文字符或空格",trigger:"blur"}],confirmLoginPassword:[{required:!0,validator:(a,s)=>new Promise(((a,e)=>{""===s?e("请再次输入密码"):s!==F.newLoginPassword?e("两次输入密码不一致!"):a()})),trigger:["change","blur"]}]},T={payPassword:[{required:!0,message:"请输入原始密码",trigger:"blur"},{min:6,max:16,message:"密码长度应在6-16个字符之间",trigger:"blur"},{pattern:/^[^\u4e00-\u9fa5]+$/,message:"密码不能包含中文字符或空格",trigger:"blur"}],newPayPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:16,message:"密码长度应在6-16个字符之间",trigger:"blur"},{pattern:/^[^\u4e00-\u9fa5]+$/,message:"密码不能包含中文字符或空格",trigger:"blur"}],confirmPayPassword:[{required:!0,validator:(a,s)=>new Promise(((a,e)=>{""===s?e("请再次输入密码"):s!==F.newPayPassword?e("两次输入密码不一致!"):a()})),trigger:["change","blur"]}]},A=async()=>{if(F.newLoginPassword!=F.oldLoginPassword)try{let a={Id:b.userInfo.UserId,Password:F.oldLoginPassword,NewPassword:F.newLoginPassword};((await e(a)).Total=1)&&Object.keys(F).forEach((a=>{F[a]=""}))}catch(a){}else P.error("新旧密码不能相同")},E=async()=>{if(F.newPayPassword!=F.payPassword)try{let a={Id:b.userInfo.UserId,Password:F.payPassword,NewPassword:F.newPayPassword};(await r(a)).Total&&Object.keys(F).forEach((a=>{F[a]=""}))}catch(a){}else P.error("新旧密码不能相同")};return(s,e)=>{const r=h,o=L,l=_,n=c;return i(),t("div",U,[u("div",x,[j,u("div",q,[u("div",I,[w(n,{labelAlign:"left",model:F,name:"basicsssssss",rules:O,"label-col":{span:7},"wrapper-col":{span:15},autocomplete:"off",onFinish:A,onFinishFailed:m(a)},{default:g((()=>[k,m(v).UserLogPwdStatus?(i(),p(o,{key:0,label:"原始密码",name:"oldLoginPassword"},{default:g((()=>[w(r,{value:F.oldLoginPassword,"onUpdate:value":e[0]||(e[0]=a=>F.oldLoginPassword=a)},null,8,["value"])])),_:1})):f("",!0),w(o,{label:"新登陆密码",name:"newLoginPassword"},{default:g((()=>[w(r,{value:F.newLoginPassword,"onUpdate:value":e[1]||(e[1]=a=>F.newLoginPassword=a)},null,8,["value"])])),_:1}),w(o,{label:"再次确认登录密码",name:"confirmLoginPassword"},{default:g((()=>[w(r,{value:F.confirmLoginPassword,"onUpdate:value":e[2]||(e[2]=a=>F.confirmLoginPassword=a)},null,8,["value"])])),_:1}),w(o,{"wrapper-col":{offset:7,span:15}},{default:g((()=>[w(l,{type:"primary","html-type":"submit"},{default:g((()=>[y("确认")])),_:1})])),_:1})])),_:1},8,["model","onFinishFailed"])]),u("div",$,[w(n,{labelAlign:"left",model:F,rules:T,name:"bddddddasic","label-col":{span:7},"wrapper-col":{span:15},autocomplete:"off",onFinish:E,onFinishFailed:m(a)},{default:g((()=>[N,m(v).UserPayPwdStatus?(i(),p(o,{key:0,label:"原支付密码",name:"payPassword"},{default:g((()=>[w(r,{value:F.payPassword,"onUpdate:value":e[3]||(e[3]=a=>F.payPassword=a)},null,8,["value"])])),_:1})):f("",!0),w(o,{label:"新支付密码",name:"newPayPassword"},{default:g((()=>[w(r,{value:F.newPayPassword,"onUpdate:value":e[4]||(e[4]=a=>F.newPayPassword=a)},null,8,["value"])])),_:1}),w(o,{label:"再次确认支付密码",name:"confirmPayPassword"},{default:g((()=>[w(r,{value:F.confirmPayPassword,"onUpdate:value":e[5]||(e[5]=a=>F.confirmPayPassword=a)},null,8,["value"])])),_:1}),w(o,{"wrapper-col":{offset:7,span:15}},{default:g((()=>[w(l,{type:"primary","html-type":"submit"},{default:g((()=>[y("确认")])),_:1})])),_:1})])),_:1},8,["model","onFinishFailed"])])])])])}}},[["__scopeId","data-v-c0ef7c9b"]]);export{O as default};
