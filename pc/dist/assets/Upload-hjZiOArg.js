import{l as a,V as e,r as s,W as t,o as l,c as i,q as n,Y as o,u as p,a1 as c,F as d,aj as r,R as u,T as f}from"./vendor-nLmjWMLT.js";import{a as m}from"./api-wuboqdNi.js";import{_ as y}from"./index-Dg1jL7gn.js";const v={class:"upload-wrap"},g=["src"],_={class:"upload"},h=(a=>(u("data-v-37a4e262"),a=a(),f(),a))((()=>n("div",{class:"upload-btn"},[n("span",null,"+"),n("h5",null,"上传")],-1))),w=y({__name:"Upload",props:{fileModule:{type:Number,default:3}},setup(u){a(),e();const f=u;let y=s("");t((()=>{}));const w=async a=>{const e=a.target.files[0];if(e.size>2097152)return;const s=new FileReader;s.readAsDataURL(null==a?void 0:a.target.files[0]),s.onload=function(){y.value=s.result};let t={fileModule:f.fileModule,fileName:a.target.files[0].name},l=await m(t),{accessid:i,policy:n,signature:o,key:p}=l.Data;const c=new FormData;c.append("OSSAccessKeyId",i),c.append("policy",n),c.append("signature",o),c.append("key",p),c.append("success_action_status","200"),c.append("file",e);try{await r.post("https://kezishe.oss-cn-beijing.aliyuncs.com",c,{headers:{"Content-Type":"multipart/form-data"}})}catch(d){}};return(a,e)=>(l(),i(d,null,[n("div",v,[3==f.fileModule?(l(),i("img",{key:0,class:o(["preview",p(y)?"active":""]),src:p(y),alt:""},null,10,g)):c("",!0),n("div",_,[n("input",{class:"ipt",onChange:w,type:"file"},null,32),h])]),3==f.fileModule?(l(),i("p",{key:0,class:o(["message",p(y)?"active":""])},"点击右侧加号可重新上传证件图片",2)):c("",!0),n("p",{class:o(["message",4==f.fileModule?"active":""])},"点击加号可重新上传文档",2)],64))}},[["__scopeId","data-v-37a4e262"]]);export{w as U};
