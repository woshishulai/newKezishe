import{g as a,f as e,r as s,h as t,i as l}from"./api-wuboqdNi.js";import{_ as i}from"./RemoveTableList-hYnpEzE_.js";import{h as n}from"./rules-fBdJGkfA.js";import{_ as o,u as r}from"./index-Dg1jL7gn.js";import{r as d,W as u,n as c,o as m,c as f,q as p,e as v,w as k,u as y,m as N,ai as g,Q as x,Y as b,t as h,a1 as w,y as I,R as _,T as D,E as C,J as j,ac as F,K as M}from"./vendor-nLmjWMLT.js";import"./index-1zYz0Z2q.js";const T=a=>(_("data-v-ff1dacf6"),a=a(),D(),a),R={class:"bank-information"},q={class:"card-box"},A=T((()=>p("div",{class:"title"},"个人昵称",-1))),E={key:0,class:"status"},P=["onClick"],U=["onClick"],z=["onClick"],J={class:"card-box"},K=T((()=>p("div",{class:"title"},"新增个人昵称",-1))),L={class:"form-wrap"},O=o({__name:"NickName",setup(o){const _=r(),D=[{title:"昵称",dataIndex:"NickName",key:"NickName",align:"center"},{title:"备注信息",dataIndex:"Memo",key:"Memo",align:"center"},{title:"",dataIndex:"status",key:"status",align:"center"}],T=d([]);u((async()=>{let e=await a();T.value=e.Data}));const O=c({open:!1,title:"",id:""}),Q=async()=>{if(1==(await s(O.id)).Tag){const a=T.value.findIndex((a=>a.Id===O.id));T.value.splice(a,1),W()}},W=()=>{O.open=!1,O.title="",O.id="",Y.open=!1,Y.title="",Y.id=""},Y=c({open:!1,title:"",id:"",default:"",labels:{one:"昵称",two:"备注"}}),B=async a=>{let e={Id:Y.id,NickName:a.username,Memo:a.country,Default:Y.default};await t(e)},G=c({username:"测试的昵称",text:"我是用来测试的昵称"}),H=async()=>{let a={NickName:G.username,Memo:G.text,Default:"0"};if(T.value.some((e=>e.NickName===a.NickName)))N.error("已经存在该昵称");else try{1==(await e(a)).Tag&&Object.keys(G).forEach((a=>{G[a]=""}))}catch(s){}};return(a,e)=>{const s=g,t=C,o=j,r=F,d=M,u=x;return m(),f("div",R,[p("div",q,[A,v(s,{pagination:!1,columns:D,"data-source":T.value},{bodyCell:k((({column:a,record:e})=>["status"===a.key?(m(),f("div",E,[p("span",{onClick:a=>{return s="修改昵称",t=e.Id,l=e.Default,Y.open=!0,Y.title=s,Y.id=t,void(Y.default=l);var s,t,l}},"修改",8,P),p("span",{onClick:a=>{return s="确定删除该昵称吗",t=e.Id,O.open=!0,O.title=s,void(O.id=t);var s,t}},"删除",8,U),p("span",{onClick:a=>(async a=>{if(a.Default)return;if(1===(await l(a.Id)).Tag){_.changeUserNickName(a);const e=T.value.find((e=>e.Id===a.Id));T.value.forEach((a=>a.Default=0)),e.Default=1}})(e),class:b(e.Default?"active":"")},h(e.Default?"默认账号":"设为默认"),11,z)])):w("",!0)])),_:1},8,["data-source"])]),p("div",J,[K,p("div",L,[v(u,{labelAlign:"left",model:G,name:"basicsss","label-col":{span:3},"wrapper-col":{span:10},autocomplete:"off",onFinish:H,onFinishFailed:y(n)},{default:k((()=>[v(o,{rules:[{required:!0,message:"昵称不能为空"}],label:"昵称",name:"username"},{default:k((()=>[v(t,{value:G.username,"onUpdate:value":e[0]||(e[0]=a=>G.username=a),valueModifiers:{trim:!0}},null,8,["value"])])),_:1}),v(o,{rules:[{required:!0,message:"备注不能为空"}],label:"备注",name:"username"},{default:k((()=>[v(r,{value:G.text,"onUpdate:value":e[1]||(e[1]=a=>G.text=a),"auto-size":{minRows:2,maxRows:5}},null,8,["value"])])),_:1}),v(o,{"wrapper-col":{offset:3,span:10}},{default:k((()=>[v(d,{type:"primary","html-type":"submit"},{default:k((()=>[I("保存")])),_:1})])),_:1})])),_:1},8,["model","onFinishFailed"])])]),v(i,{onPostApi:Q,params:O,changeParams:Y,onChangeApi:B},null,8,["params","changeParams"])])}}},[["__scopeId","data-v-ff1dacf6"]]);export{O as default};
