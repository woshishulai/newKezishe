import{c as e,d as a,e as l}from"./api-wuboqdNi.js";import{_ as s,u as r}from"./index-Dg1jL7gn.js";import{h as u}from"./rules-fBdJGkfA.js";import{U as i}from"./Upload-hjZiOArg.js";import{r as t,W as d,o as n,c as o,q as v,t as m,u as f,e as c,w as g,Q as p,y as h,Y as b,p as I,a1 as _,R as y,T as M,E as T,J as k,ar as U,a5 as N,a6 as q,ah as w,a7 as x,K as P,m as R}from"./vendor-nLmjWMLT.js";import"./index-1zYz0Z2q.js";const F={RealName:[{required:!0,message:"请输入您的姓名",trigger:"change"},{min:1,max:20,message:"用户名长度1-20位",trigger:"change"}],IdNumbers:[{required:!0,message:"证件号码不能为空",trigger:"change"},{pattern:/^[a-zA-Z0-9]+$/,message:"证件号码暂不支持中文或空格",trigger:"change"}]},A={Mobile:[{required:!0,message:"请输入手机号",trigger:"change"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号格式",trigger:"change"}],code:[{required:!0,message:"请输入短信验证码",trigger:"change"},{min:4,max:6,message:"请输入长度为4-6位数的验证码",trigger:"change"},{pattern:/^[0-9]+$/,message:"只能输入数字",trigger:"change"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:["blur","change"]}],emailCode:[{required:!0,message:"请输入邮箱验证码",trigger:"change"},{min:4,max:6,message:"请输入长度为4-6位数的邮箱验证码",trigger:"change"},{pattern:/^[0-9]+$/,message:"只能输入数字",trigger:"change"}],TelPhone:[{required:!0,message:"请输入手机号",trigger:"change"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号格式",trigger:"change"}]},j=e=>(y("data-v-7417dbc0"),e=e(),M(),e),C={class:"personal-information"},$={class:"card-box"},B=j((()=>v("div",{class:"title"},"个人信息",-1))),G={class:"user-id"},Y={class:"card-box"},z=j((()=>v("div",{class:"title"}," 基本信息(通过) ",-1))),Z={class:"form-wrap"},D={class:"card-box"},E=j((()=>v("div",{class:"title"},"联系信息",-1))),J={class:"form-wrap"},K={class:"flex"},L={key:0},O={key:1},Q={class:"flex"},S={class:"flex"},W={key:0},H={key:1},V=s({__name:"PersonalInformation",setup(s){const y=r(),M=t(0),j=t(0),V=t(),X=t({RealName:"",Gender:"0",Birthday:"",IdType:"",IdNumbers:"",fileList:""}),ee=t({Mobile:"",code:"",email:"",emailCode:"",TelPhone:""});d((async()=>{try{let a=await e();y.changeUserInfo(a.Data),X.value=Object.assign({},y.userInfo)}catch(a){}}));const ae=(e,a)=>R[e](a),le=()=>{if((()=>{const e=ee.value.Mobile,a=/^1[3456789]\d{9}$/.test(e);return a||ae("error","请输入正确的手机号"),a})()){M.value=60,ae("success","验证码发送成功请输入验证码");const e=setInterval((()=>{M.value>0?M.value--:clearInterval(e)}),1e3)}},se=()=>{if((()=>{const e=ee.value.email,a=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e);return a||ae("error","请输入正确的邮箱地址"),a})()){j.value=60,ae("success","验证码发送成功，请输入验证码");const e=setInterval((()=>{j.value>0?j.value--:clearInterval(e)}),1e3)}},re=async()=>{let e={Id:y.userInfo.UserId,RealName:X.value.RealName,Gender:X.value.Gender,Birthday:X.value.Birthday,IdType:X.value.IdType,IdNumbers:X.value.IdNumbers,IdImage:""};try{await a(e)}catch(l){}},ue=async()=>{let e={Id:y.userInfo.UserId,Mobile:ee.value.Mobile,Email:ee.value.email,TelPhone:ee.value.TelPhone};await l(e)};return(e,a)=>{var l,s;const r=T,t=k,d=U,R=N,ae=q,ie=w,te=x,de=P,ne=p;return n(),o("div",C,[v("div",$,[B,v("div",G,[v("li",null,"客户编号: "+m(f(y).userInfo.UserId),1),v("li",null,"账户: "+m(1==(null==(l=f(y).userInfo)?void 0:l.UserStatus)?"正常":"禁用"),1),v("li",null,"注册: "+m(null==(s=f(y).userInfo)?void 0:s.RegTime),1)])]),v("div",Y,[z,v("div",Z,[c(ne,{labelAlign:"left",ref_key:"formRef",ref:V,rules:f(F),onFinish:re,onFinishFailed:f(u),model:X.value,"label-col":{span:5},"wrapper-col":{span:19},"hide-required-mark":!0,autocomplete:"off"},{default:g((()=>[c(t,{label:"姓名","has-feedback":"",name:"RealName"},{default:g((()=>[c(r,{value:X.value.RealName,"onUpdate:value":a[0]||(a[0]=e=>X.value.RealName=e),valueModifiers:{trim:!0}},null,8,["value"])])),_:1}),c(t,{label:"性别",name:"gender"},{default:g((()=>[c(R,{value:X.value.Gender,"onUpdate:value":a[1]||(a[1]=e=>X.value.Gender=e),valueModifiers:{trim:!0}},{default:g((()=>[c(d,{value:"1"},{default:g((()=>[h("男")])),_:1}),c(d,{value:"0"},{default:g((()=>[h("女")])),_:1})])),_:1},8,["value"])])),_:1}),c(t,{label:"出生年月",name:"date1"},{default:g((()=>[c(ae,{"value-format":"YYYY-MM-DD",value:X.value.Birthday,"onUpdate:value":a[2]||(a[2]=e=>X.value.Birthday=e),style:{width:"100%"}},null,8,["value"])])),_:1}),c(t,{label:"证件类型","has-feedback":"",name:"region",class:"card-cate"},{default:g((()=>[c(te,{value:X.value.IdType,"onUpdate:value":a[3]||(a[3]=e=>X.value.IdType=e),valueModifiers:{trim:!0},placeholder:""},{default:g((()=>[c(ie,{value:"1"},{default:g((()=>[h("身份证")])),_:1}),c(ie,{value:"2"},{default:g((()=>[h("护照")])),_:1}),c(ie,{value:"3"},{default:g((()=>[h("台胞证")])),_:1}),c(ie,{value:"4"},{default:g((()=>[h("其他")])),_:1})])),_:1},8,["value"])])),_:1}),c(t,{label:"证件号码",name:"IdNumbers"},{default:g((()=>{var e;return[c(r,{class:b((null==(e=f(y).userTranslate.userProfileInfos)?void 0:e[0].IsAuth)?"active":""),value:X.value.IdNumbers,"onUpdate:value":a[4]||(a[4]=e=>X.value.IdNumbers=e),valueModifiers:{trim:!0}},null,8,["class","value"])]})),_:1}),c(t,{label:"证件照片",class:"upload-wrap"},{default:g((()=>[c(i)])),_:1}),c(t,{"wrapper-col":{span:19,offset:5}},{default:g((()=>[c(de,{"html-type":"submit",type:"primary"},{default:g((()=>[h("保存基本信息")])),_:1})])),_:1})])),_:1},8,["rules","onFinishFailed","model"])])]),v("div",D,[E,v("div",J,[c(ne,{labelAlign:"left",ref_key:"formRef",ref:V,onFinish:ue,onFinishFailed:f(u),rules:f(A),model:ee.value,"label-col":{span:5},"wrapper-col":{span:19},autocomplete:"off","hide-required-mark":!0},{default:g((()=>[c(t,{"hide-required-mark":"false",label:"手机",name:"Mobile"},{default:g((()=>[v("div",K,[c(r,{value:ee.value.Mobile,"onUpdate:value":a[5]||(a[5]=e=>ee.value.Mobile=e)},null,8,["value"]),"1"!==f(y).userTranslate.verifyPhone?(n(),I(de,{key:0,onClick:le,disabled:M.value>0},{default:g((()=>[0===M.value?(n(),o("span",L,"获取验证码")):(n(),o("span",O,m(M.value),1))])),_:1},8,["disabled"])):_("",!0)])])),_:1}),"1"!==f(y).userTranslate.verifyPhone?(n(),I(t,{key:0,"hide-required-mark":"false",label:"验证码",name:"code"},{default:g((()=>[v("div",Q,[c(r,{value:ee.value.code,"onUpdate:value":a[6]||(a[6]=e=>ee.value.code=e),valueModifiers:{trim:!0}},null,8,["value"])])])),_:1})):_("",!0),c(t,{label:"邮箱",name:"email"},{default:g((()=>{var e;return[v("div",S,[c(r,{class:b((null==(e=f(y).userTranslate.userProfileInfos)?void 0:e[2].IsAuth)?"active":""),value:ee.value.email,"onUpdate:value":a[7]||(a[7]=e=>ee.value.email=e),valueModifiers:{trim:!0}},null,8,["class","value"]),c(de,{onClick:se,disabled:j.value>0},{default:g((()=>[0===j.value?(n(),o("span",W,"获取验证码")):(n(),o("span",H,m(j.value),1))])),_:1},8,["disabled"])])]})),_:1}),c(t,{"hide-required-mark":"false",label:"邮箱验证码",name:"emailCode"},{default:g((()=>[c(r,{value:ee.value.emailCode,"onUpdate:value":a[8]||(a[8]=e=>ee.value.emailCode=e),valueModifiers:{trim:!0}},null,8,["value"])])),_:1}),c(t,{label:"电话",name:"TelPhone"},{default:g((()=>[c(r,{value:ee.value.TelPhone,"onUpdate:value":a[9]||(a[9]=e=>ee.value.TelPhone=e),valueModifiers:{trim:!0}},null,8,["value"])])),_:1}),c(t,{"wrapper-col":{span:19,offset:5}},{default:g((()=>[c(de,{"html-type":"submit",type:"primary"},{default:g((()=>[h("保存基本信息")])),_:1})])),_:1})])),_:1},8,["onFinishFailed","rules","model"])])])])}}},[["__scopeId","data-v-7417dbc0"]]);export{V as default};
