import{j as e,k as a,l as s,m as l,n as t}from"./api-wuboqdNi.js";import{c as n,d as r}from"./data-rFiuhi2t.js";import{_ as i}from"./RemoveTableList-hYnpEzE_.js";import{h as d}from"./rules-fBdJGkfA.js";import{_ as o}from"./index-Dg1jL7gn.js";import{r as u,n as m,W as c,o as p,c as v,q as f,e as h,w as g,u as b,m as k,ai as y,Q as x,t as _,a1 as C,Y as w,y as I,R as N,T as j,E as A,J as F,a7 as D,as as q,ac as B,K as U}from"./vendor-nLmjWMLT.js";import"./index-1zYz0Z2q.js";const L=e=>(N("data-v-de788d93"),e=e(),j(),e),M={class:"bank-information"},R={class:"card-box"},S=L((()=>f("div",{class:"title"},"银行账号",-1))),T={key:0,class:"address"},P=L((()=>f("span",null,"  ",-1))),E=L((()=>f("span",null,"  ",-1))),O={key:1,class:"status"},z=["onClick"],H=["onClick"],J=["onClick"],K={class:"card-box"},Q=L((()=>f("div",{class:"title"},"新增银行账号",-1))),W={class:"form-wrap"},Y=o({__name:"BankInformation",setup(o){const N=u([]),j=m({open:!1,title:"",id:""}),L=m({open:!1,title:"",id:"",default:"",labels:{one:"姓名",two:"国家",there:"银行名称",four:"省份",five:"市",six:"分行支行",senven:"银行卡号",enigh:"备注信息"}});c((async()=>{Z();try{let a=await e();N.value=a.Data}catch(a){}}));const Y=m({username:"测试",region:"中国",statusList:[],date1:void 0,text:"工资卡",bankNmae:"中国银行",tel:"回龙观支行",phone:"8372749471938492"}),$=[{title:"姓名",dataIndex:"FullName",key:"FullName",align:"center"},{title:"银行",dataIndex:"Address",key:"Address",align:"center"},{title:"账号",dataIndex:"Card",key:"Card",align:"center"},{title:"",dataIndex:"status",key:"status"}],G=()=>{j.open=!1,j.title="",j.id="",L.open=!1,L.title="",L.id=""},V=async()=>{if(1==(await s(j.id)).Tag){const e=N.value.findIndex((e=>e.Id===j.id));N.value.splice(e,1),G()}},X=async e=>{let a={Id:L.id,FullName:e.username,Address:e.country,BankName:e.status,Sheng:e.shi,Shi:e.text,Branch:e.postal,Card:e.tel,Memo:e.phone,Default:L.default};await l(a)},Z=e=>{const a=e||"CHN",s=e=>{const a=r[e];return a?Object.entries(a).map((([e,a])=>{const s=r[e];return{value:a,label:a,children:s?Object.entries(s).map((([e,a])=>({value:a,label:a}))):[]}})):[]};return Y.statusList=s(a),s(a)},ee=(e,a)=>{Z(a.id),Y.region=e,Y.date1=""},ae=async()=>{if(!Y.date1)return void k.error("省市地区不能为空");let e={FullName:Y.username,Address:Y.region,BankName:Y.bankNmae,Sheng:Y.date1[0],Shi:Y.date1[1],Branch:Y.tel,Card:Y.phone,Memo:Y.text,Default:"0"};try{await a(e)}catch(s){}};return(e,a)=>{const s=y,l=A,r=F,o=D,u=q,m=B,c=U,k=x;return p(),v("div",M,[f("div",R,[S,h(s,{pagination:!1,columns:$,"data-source":N.value},{bodyCell:g((({column:e,record:a})=>["Address"===e.key?(p(),v("div",T,[f("span",null,_(a.Address),1),P,f("span",null,_(a.BankName),1),E,f("span",null,_(a.Branch),1)])):C("",!0),"status"===e.key?(p(),v("div",O,[f("span",{onClick:e=>{return s="修改银行账户信息",l=a.Id,t=a.Default,L.open=!0,L.title=s,L.id=l,void(L.default=t);var s,l,t}},"修改",8,z),f("span",{onClick:e=>{return s="确定删除该银行信息吗",l=a.Id,j.open=!0,j.title=s,void(j.id=l);var s,l}},"删除",8,H),f("span",{onClick:e=>(async e=>{if(1===(await t(e)).Tag){const a=N.value.find((a=>a.Id===e));N.value.forEach((e=>e.Default=0)),a.Default=1}})(a.Id),class:w(a.Default?"active":"")},_(a.Default?"默认账号":"设为默认"),11,J)])):C("",!0)])),_:1},8,["data-source"])]),f("div",K,[Q,f("div",W,[h(k,{labelAlign:"left",model:Y,name:"basicsss","label-col":{span:3},"wrapper-col":{span:10},autocomplete:"off",onFinish:ae,onFinishFailed:b(d)},{default:g((()=>[h(r,{rules:[{required:!0,message:"姓名不能为空"}],label:"姓名",name:"username"},{default:g((()=>[h(l,{value:Y.username,"onUpdate:value":a[0]||(a[0]=e=>Y.username=e),valueModifiers:{trim:!0}},null,8,["value"])])),_:1}),h(r,{rules:[{required:!0,message:"国家不能为空"}],label:"国家地区"},{default:g((()=>[h(o,{value:Y.region,"onUpdate:value":a[1]||(a[1]=e=>Y.region=e),"show-search":"",options:b(n),onChange:ee},null,8,["value","options"])])),_:1}),h(r,{rules:[{required:!0,message:"省市不能为空"}],label:"省市地址",name:"username"},{default:g((()=>[h(u,{"expand-trigger":"hover",value:Y.date1,"onUpdate:value":a[2]||(a[2]=e=>Y.date1=e),options:Y.statusList},null,8,["value","options"])])),_:1}),h(r,{rules:[{required:!0,message:"银行名称不能为空"}],label:"银行名称",name:"bankNmae"},{default:g((()=>[h(l,{value:Y.bankNmae,"onUpdate:value":a[3]||(a[3]=e=>Y.bankNmae=e)},null,8,["value"])])),_:1}),h(r,{rules:[{required:!0,message:"分行支行"}],label:"'分行支行",name:"tel"},{default:g((()=>[h(l,{value:Y.tel,"onUpdate:value":a[4]||(a[4]=e=>Y.tel=e)},null,8,["value"])])),_:1}),h(r,{rules:[{required:!0,message:"银行卡号不能为空"},{pattern:/^[0-9]{13,19}$/,message:"银行卡号格式不正确"}],label:"银行卡号",name:"phone"},{default:g((()=>[h(l,{value:Y.phone,"onUpdate:value":a[5]||(a[5]=e=>Y.phone=e)},null,8,["value"])])),_:1}),h(r,{label:"备注信息"},{default:g((()=>[h(m,{value:Y.text,"onUpdate:value":a[6]||(a[6]=e=>Y.text=e),"auto-size":{minRows:2,maxRows:5}},null,8,["value"])])),_:1}),h(r,{"wrapper-col":{offset:3,span:10}},{default:g((()=>[h(c,{type:"primary","html-type":"submit"},{default:g((()=>[I("保存")])),_:1})])),_:1})])),_:1},8,["model","onFinishFailed"])])]),h(i,{onCloseModel:G,onPostApi:V,params:j,changeParams:L,onChangeApi:X},null,8,["params","changeParams"])])}}},[["__scopeId","data-v-de788d93"]]);export{Y as default};
